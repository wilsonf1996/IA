<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alarme</title>
    <!-- Adicione as bibliotecas do Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
    <style>
        /* Seus estilos aqui... */
    </style>
</head>

<body>
    <h1>Alarme</h1>

    <table id="alarm-table">
        <thead>
            <tr>
                <th>Horário</th>
                <th>Ação</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody id="alarm-body"></tbody>
    </table>

    <div>
        <label for="newTime">Novo Horário:</label>
        <input type="time" id="newTime">
        <label for="newAction">Nova Ação:</label>
        <input type="text" id="newAction">
        <button onclick="addAlarm()">Adicionar Alarme</button>
    </div>

    <script>
        // Configuração do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyAIp-rFuZZsBCNVJ3pSge4TE-XUuwYygrI",
            authDomain: "agenda-6accc.firebaseapp.com",
            databaseURL: "https://agenda-6accc-default-rtdb.firebaseio.com",
            projectId: "agenda-6accc",
            storageBucket: "agenda-6accc.appspot.com",
            messagingSenderId: "794262176773",
            appId: "1:794262176773:web:c4e3837b29f635d5dc086c",
            measurementId: "G-CVBQ54PERH"
        };

        // Inicialização do Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        function initAlarmTable() {
            const alarmTable = document.getElementById('alarm-table');
            const alarmBody = document.getElementById('alarm-body');
            alarmBody.innerHTML = "";

            // Cabeçalho da tabela
            const tableHeader = alarmTable.querySelector('thead tr');
            tableHeader.innerHTML = "<th>Horário</th><th>Ação</th><th>Ações</th>";

            // Conteúdo da tabela
            const alarms = [
                { id: 1, time: '08:00', action: 'Tomar Medicamento' },
                { id: 2, time: '12:30', action: 'Almoço' },
                // Adicione mais alarmes conforme necessário
            ];

            for (const alarm of alarms) {
                const row = alarmBody.insertRow();
                const cellTime = row.insertCell(0);
                const cellAction = row.insertCell(1);
                const cellActions = row.insertCell(2);

                cellTime.textContent = alarm.time;
                cellAction.textContent = alarm.action;
                cellActions.innerHTML = `<button onclick="editAlarm(${alarm.id})">Editar</button> <button onclick="deleteAlarm(${alarm.id})">Excluir</button>`;

                // Definir alertas sonoros para o horário atual
                const currentTime = new Date();
                const alarmTime = new Date(currentTime.toDateString() + ' ' + alarm.time);
                if (currentTime < alarmTime) {
                    setTimeout(() => {
                        alert(`É hora para: ${alarm.action}`);
                        // Adicione aqui a lógica para reproduzir o som do alarme
                    }, alarmTime - currentTime);
                }
            }
        }

        function addAlarm() {
            const newTime = document.getElementById('newTime').value;
            const newAction = document.getElementById('newAction').value;

            if (newTime && newAction) {
                // Adicione o novo alarme ao Firebase e recarregue a tabela
                const newAlarmRef = database.ref('/alarms').push();
                newAlarmRef.set({
                    time: newTime,
                    action: newAction
                });

                initAlarmTable();
            } else {
                alert('Preencha todos os campos para adicionar um novo alarme.');
            }
        }

        function editAlarm(id) {
            // Implemente a lógica de edição aqui
            alert(`Editar alarme com ID: ${id}`);
        }

        function deleteAlarm(id) {
            // Implemente a lógica de exclusão aqui
            alert(`Excluir alarme com ID: ${id}`);
        }

        initAlarmTable();
    </script>

    <button onclick="goToHomePage()">Voltar para a Página Principal</button>

    <script>
        function goToHomePage() {
            window.location.href = 'https://wilsonf1996.github.io/index.html';
        }
    </script>
</body>

</html>
