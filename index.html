<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Página Principal</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            text-align: center;
            margin: 20px;
        }

        h1 {
            color: #333;
        }

        #auth-section {
            display: block;
        }

        #main-content {
            display: none;
        }

        #search-box {
            margin-top: 20px;
        }

        #chat-output {
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #ddd;
            padding: 10px;
        }

        /* Outros estilos e scripts do seu código */

    </style>
</head>

<body>
    <h1>Minha Página Principal</h1>

    <!-- Seção de autenticação -->
    <div id="auth-section">
        <label for="password">Digite a senha:</label>
        <input type="password" id="password">
        <button onclick="authenticate()">Entrar</button>
    </div>

    <!-- Seção principal -->
    <div id="main-content">
        <!-- Conteúdo principal -->

        <!-- Caixa de pesquisa -->
        <div id="search-box">
            <label for="query">Pesquisar:</label>
            <input type="text" id="query">
            <button onclick="search()">Pesquisar</button>
        </div>

        <!-- Campo de retorno de conteúdo do ChatGPT -->
        <div id="chat-output"></div>

        <!-- Outras funções e scripts do seu código -->
        <script>
            // Função para verificar se o usuário já foi autenticado
            function checkAuthentication() {
                const isAuthenticated = localStorage.getItem('authenticated');

                if (isAuthenticated === 'true') {
                    // Se o usuário já foi autenticado, exibe a seção principal e esconde a seção de autenticação
                    document.getElementById('main-content').style.display = 'block';
                    document.getElementById('auth-section').style.display = 'none';
                } else {
                    // Se o usuário não foi autenticado, exibe a seção de autenticação e esconde a seção principal
                    document.getElementById('main-content').style.display = 'none';
                    document.getElementById('auth-section').style.display = 'block';
                }
            }

            // Função para autenticar
            function authenticate() {
                const enteredPassword = document.getElementById('password').value;

                if (enteredPassword === "2020") {
                    // Se a senha está correta, marca o usuário como autenticado e exibe a seção principal
                    localStorage.setItem('authenticated', 'true');
                    document.getElementById('main-content').style.display = 'block';
                    document.getElementById('auth-section').style.display = 'none';
                } else {
                    alert("Senha incorreta. Tente novamente.");
                }
            }

            // Função para realizar pesquisa usando o ChatGPT
            function search() {
                const query = document.getElementById('query').value;

                // Substitua 'SUA_CHAVE_DA_API' pela sua chave da API da OpenAI
                const apiKey = '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';
                const apiUrl = 'https://api.openai.com/v1/engines/davinci-codex/completions';

                fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`,
                    },
                    body: JSON.stringify({
                        prompt: query,
                        max_tokens: 150,
                    }),
                })
                    .then(response => response.json())
                    .then(data => {
                        // Exibe o resultado no campo de retorno
                        document.getElementById('chat-output').innerText = data.choices[0].text;
                    })
                    .catch(error => console.error('Erro na pesquisa:', error));
            }

            // Ao carregar a página, verifica se o usuário já foi autenticado
            document.addEventListener('DOMContentLoaded', function () {
                checkAuthentication();

                // Chame as funções iniciais
                updateWeatherData();
                updateDateTime();
                updateForecast();

                // Atualize os dados periodicamente a cada 30 minutos (1800000 milissegundos)
                setInterval(() => {
                    updateWeatherData();
                    updateDateTime();
                    updateForecast();
                }, 1800000);
            });

            // Outras funções e scripts do seu código...

            <!-- Continuação do código anterior -->

<!-- Outras funções e scripts do seu código -->

<script>
    // Restante do seu script...

    // Script para atualizar dados de clima, tempo e previsão
    async function updateWeatherData() {
        try {
            const position = await getCurrentPosition();
            const weatherData = await fetchWeatherDataByCoordinates(position.coords.latitude, position.coords.longitude);
            updateWeatherUI(weatherData);
        } catch (error) {
            console.error('Erro ao atualizar dados de clima:', error);
        }
    }

    async function getCurrentPosition() {
        return new Promise((resolve, reject) => {
            navigator.geolocation.getCurrentPosition(resolve, reject);
        });
    }

    async function fetchWeatherDataByCoordinates(latitude, longitude) {
        const apiKey = 'e18e61a7e515eb3b92b588155acd3bc1';
        const apiUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=${apiKey}`;
        const response = await fetch(apiUrl);
        const data = await response.json();
        return {
            location: data.name,
            weather: data.weather[0].description,
            temperature: (data.main.temp - 273.15).toFixed(2),
        };
    }

    function updateWeatherUI(weatherData) {
        document.getElementById('location').innerText = `Localização: ${weatherData.location}`;
        document.getElementById('weather').innerText = `Condição do Tempo: ${weatherData.weather}`;
        document.getElementById('temperature').innerText = `Temperatura: ${weatherData.temperature}°C`;
    }

    // Script para atualizar data e hora
    async function updateDateTime() {
        const now = new Date();
        const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        const timeOptions = { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: false };
        document.getElementById('date').innerText = `Data: ${now.toLocaleDateString('pt-BR', dateOptions)}`;
        document.getElementById('clock').innerText = `Hora: ${now.toLocaleTimeString('pt-BR', timeOptions)}`;
    }

    // Script para atualizar previsão diária
    async function updateForecast() {
        try {
            const position = await getCurrentPosition();
            const forecastData = await fetchDailyForecastByCoordinates(position.coords.latitude, position.coords.longitude);
            updateForecastUI(forecastData);
        } catch (error) {
            console.error('Erro ao atualizar previsão diária:', error);
        }
    }

    async function fetchDailyForecastByCoordinates(latitude, longitude) {
        const apiKey = 'e18e61a7e515eb3b92b588155acd3bc1';
        const apiUrl = `https://api.openweathermap.org/data/2.5/forecast?lat=${latitude}&lon=${longitude}&appid=${apiKey}`;
        const response = await fetch(apiUrl);
        const data = await response.json();
        const dailyForecast = data.list[0].weather[0].description;
        return {
            forecast: dailyForecast,
        };
    }

    function updateForecastUI(forecastData) {
        document.getElementById('forecast').innerText = `Previsão Diária: ${forecastData.forecast}`;
    }

    // Restante do seu script...
<!-- Continuação do código anterior -->

<!-- Outras funções e scripts do seu código -->

<script>
    // Função para verificar se o usuário já foi autenticado
    function checkAuthentication() {
        const isAuthenticated = localStorage.getItem('authenticated');

        if (isAuthenticated === 'true') {
            // Se o usuário já foi autenticado, exibe a seção principal e esconde a seção de autenticação
            document.getElementById('main-content').style.display = 'block';
            document.getElementById('auth-section').style.display = 'none';
        } else {
            // Se o usuário não foi autenticado, exibe a seção de autenticação e esconde a seção principal
            document.getElementById('main-content').style.display = 'none';
            document.getElementById('auth-section').style.display = 'block';
        }
    }

    // Função para autenticar
    function authenticate() {
        const enteredPassword = document.getElementById('password').value;

        if (enteredPassword === "2020") {
            // Se a senha está correta, marca o usuário como autenticado e exibe a seção principal
            localStorage.setItem('authenticated', 'true');
            document.getElementById('main-content').style.display = 'block';
            document.getElementById('auth-section').style.display = 'none';
        } else {
            alert("Senha incorreta. Tente novamente.");
        }
    }

    // Funções adicionais, como goToCalculatorPage(), goToNotesPage(), etc.
    function goToAgendaSemanalPage() {
        window.location.href = 'https://wilsonf1996.github.io/index.html/agendasemanal/agendasemanal.html';
    }

    function goToCalculatorPage() {
        window.location.href = 'https://wilsonf1996.github.io/index.html/calculadora/calculadora.html';
    }

    function goToNotesPage() {
        window.location.href = 'https://wilsonf1996.github.io/index.html/notas/notas.html';
    }

    function goToExpensesPage() {
        window.location.href = 'https://wilsonf1996.github.io/index.html/gastos/gastos.html';
    }

    // Ao carregar a página, verifica se o usuário já foi autenticado
    document.addEventListener('DOMContentLoaded', function () {
        checkAuthentication();

        // Chame as funções iniciais
        updateWeatherData();
        updateDateTime();
        updateForecast();

        // Atualize os dados periodicamente a cada 30 minutos (1800000 milissegundos)
        setInterval(() => {
            updateWeatherData();
            updateDateTime();
            updateForecast();
        }, 1800000);
    });

    // Restante do seu script...


        </script>
    </div>
</body>

</html>
